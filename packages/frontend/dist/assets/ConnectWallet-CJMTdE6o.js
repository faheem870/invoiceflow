import{d as k,i as C,o as a,c as n,a as e,j as N,t as c,f as x,u as m,b as u,F as W,r as B,n as p,k as F,g as v,l as S,m as M}from"./index-xWi3uxHh.js";const V={class:"min-h-[calc(100vh-8rem)] flex items-center justify-center py-12"},j={class:"w-full max-w-lg mx-auto px-4"},I={key:0,class:"mb-4 p-3 rounded-lg bg-destructive/10 border border-destructive/20 text-destructive text-sm"},R={key:1,class:"mb-4 p-3 rounded-lg bg-yellow-500/10 border border-yellow-500/20 text-yellow-700 dark:text-yellow-400 text-sm"},A={class:"mb-6"},z={class:"grid gap-3"},L=["onClick"],P={class:"text-sm font-bold"},T={class:"font-semibold"},q={class:"text-sm text-muted-foreground mt-0.5"},D=["disabled"],E={key:0,class:"inline-flex items-center gap-2"},O={key:1},$=k({__name:"ConnectWallet",setup(U){const y=S(),h=M(),g=C(),i=F(),o=v(null),l=v("role"),d=v(null),f=[{id:"seller",title:"Seller",description:"Create invoices, mint NFTs, and get paid in stablecoins.",path:"/seller"},{id:"payer",title:"Payer",description:"Review, approve, and pay invoices via escrow.",path:"/payer"},{id:"investor",title:"Investor",description:"Browse the marketplace and buy invoices at a discount for yield.",path:"/marketplace"}];async function w(){if(o.value){d.value=null,l.value="connecting";try{const r=await i.connect();if(!r){d.value=i.error.value||"Failed to connect wallet.",l.value="role";return}g.setAddress(r),g.setUser({id:0,walletAddress:r,displayName:r.slice(0,6)+"..."+r.slice(-4),role:o.value,desciOptIn:!1});const t=h.query.redirect;if(t)y.push(t);else{const s=f.find(b=>b.id===o.value);y.push(s?.path||"/seller")}}catch(r){d.value=r.message||"Failed to connect wallet."}finally{l.value="role"}}}const _={role:"Connect Wallet",connecting:"Connecting Wallet...",signing:"Sign Message..."};return(r,t)=>(a(),n("div",V,[e("div",j,[t[3]||(t[3]=N('<div class="text-center mb-8"><div class="w-16 h-16 rounded-2xl bg-primary flex items-center justify-center mx-auto mb-4"><span class="text-primary-foreground font-bold text-2xl">IF</span></div><h1 class="text-3xl font-bold mb-2">Connect Your Wallet</h1><p class="text-muted-foreground"> Choose your role and connect to start using InvoiceFlow </p></div>',1)),d.value?(a(),n("div",I,c(d.value),1)):x("",!0),m(i).hasWallet.value?x("",!0):(a(),n("div",R,[...t[0]||(t[0]=[u(" No wallet detected. Please install ",-1),e("a",{href:"https://metamask.io",target:"_blank",class:"underline font-medium"},"MetaMask",-1),u(" to continue. ",-1)])])),e("div",A,[t[1]||(t[1]=e("p",{class:"text-sm font-medium mb-3"},"Select your primary role:",-1)),e("div",z,[(a(),n(W,null,B(f,s=>e("button",{key:s.id,onClick:b=>o.value=s.id,class:p(["flex items-start gap-4 p-4 rounded-lg border text-left transition-all",o.value===s.id?"border-primary bg-primary/5 ring-1 ring-primary":"border-border hover:border-primary/50 hover:bg-muted/50"])},[e("div",{class:p(["w-10 h-10 rounded-lg flex items-center justify-center flex-shrink-0",o.value===s.id?"bg-primary text-primary-foreground":"bg-muted"])},[e("span",P,c(s.title[0]),1)],2),e("div",null,[e("p",T,c(s.title),1),e("p",q,c(s.description),1)])],10,L)),64))])]),e("button",{onClick:w,disabled:!o.value||l.value!=="role"||!m(i).hasWallet.value,class:p(["w-full py-3 rounded-md text-base font-medium transition-colors",o.value&&l.value==="role"&&m(i).hasWallet.value?"bg-primary text-primary-foreground hover:bg-primary/90":"bg-muted text-muted-foreground cursor-not-allowed"])},[l.value!=="role"?(a(),n("span",E,[t[2]||(t[2]=e("svg",{class:"animate-spin h-4 w-4",viewBox:"0 0 24 24",fill:"none"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})],-1)),u(" "+c(_[l.value]),1)])):(a(),n("span",O,"Connect Wallet"))],10,D),t[4]||(t[4]=e("p",{class:"text-xs text-muted-foreground text-center mt-4"},[u(" By connecting, you agree to interact with smart contracts on BNB Chain. "),e("br"),u("No email or password needed â€” your wallet is your identity. ")],-1))])]))}});export{$ as default};
